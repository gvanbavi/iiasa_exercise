{% extends "layouts/base.html" %}

{% block title %} Dashboard {% endblock %} 

<!-- Specific Page CSS goes HERE  -->
{% block stylesheets %}{% endblock stylesheets %}

{% block content %}
  <div class="content">
    <div class="row">

    <div class="card">
    <div class="card-body">
    <form>
      <div class="form-group">
        <label >Select Month</label>
        <select class="form-control" id="month-selector" onchange="monthChanged()">
          <option value="1" selected>1</option>
          <option value="2" >2</option>
          <option>3</option>
          <option>4</option>
          <option>5</option>
          <option>6</option>
          <option>7</option>
          <option>8</option>
          <option>9</option>
          <option>10</option>
          <option>11</option>
          <option>12</option>
        </select>
      </div>
    </form>
    </div>
    </div>

      <div class="col-md-8">
            <img src="{{img_url}}" alt="Image" id="image">
      </div>
    </div>
  </div>

{% endblock content %}

<!-- Specific Page JS goes HERE  -->
{% block javascripts %}
 <script>
        function monthChanged() {
            const selectedMonth = document.getElementById('month-selector').value;
            fetch(`/fetch-new-pic?month=${selectedMonth}`)
                .then(response => response.json())
                .then(data => {
                    console.log(data);
                    const imageURL = data.image_url;
                    console.log(imageURL);
                    document.getElementById('image').src = imageURL;
                });
        }
    </script>
{% endblock javascripts %}
